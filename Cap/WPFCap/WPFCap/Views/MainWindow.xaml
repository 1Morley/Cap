<Window x:Class="WPFCap.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:WPFCap.ViewModels"
        xmlns:windows="clr-namespace:WPFCap.Views.Windows"
        xmlns:controllers="clr-namespace:WPFCap.Controllers"
        xmlns:controls="clr-namespace:WPFCap.Views.Controls"
        mc:Ignorable="d"
                Height="{x:Static SystemParameters.PrimaryScreenHeight}" Width="{x:Static SystemParameters.PrimaryScreenWidth}" 
        AllowsTransparency="True"
        Background="Transparent"
        WindowStyle="None"
        WindowState="Maximized"
        Topmost="True"
        BorderThickness="{x:Static SystemParameters.WindowResizeBorderThickness}"
        PreviewMouseDown="Window_ClearFocusOnElement"
        Closing="Window_Closed">
    <Window.DataContext>
        <viewmodels:MainWindowViewModel/>
    </Window.DataContext>

    <Canvas x:Name="MainCanvas"
            DragOver="MainCanvas_DragOver"
            Drop="MainCanvas_Drop">
        <windows:WindowDisplay DataContext="{Binding ProjectCreateVD}"
                               TopLineEvent="TopLine_MouseDown"
                             ViewWindowEvent="ViewWindow_MouseMove"
                                Visibility="{Binding Source={StaticResource WindowController}, Path=CreateProjectVis}"        
                             Canvas.Left="{Binding Left, Mode=TwoWay}"
                             Canvas.Top="{Binding Top, Mode=TwoWay}"
                               Height="{Binding Height}"
                               Width="{Binding Width}">
            
            <controls:ProjectCreateControl DataContext="{Binding DataContext.ProjectListVM, RelativeSource={RelativeSource AncestorType=Window}}"/>
        </windows:WindowDisplay>
        <windows:WindowDisplay DataContext="{Binding EntryCreateVD}"
                               TopLineEvent="TopLine_MouseDown"
                             ViewWindowEvent="ViewWindow_MouseMove"
                                Visibility="{Binding Source={StaticResource WindowController}, Path=CreateEntryVis}"        
                             Canvas.Left="{Binding Left, Mode=TwoWay}"
                             Canvas.Top="{Binding Top, Mode=TwoWay}"
                               Height="{Binding Height}"
                               Width="{Binding Width}">
            
            <controls:EntryCreateControl DataContext="{Binding DataContext.ProjectListVM.ProjectVM.EntryListVM, RelativeSource={RelativeSource AncestorType=Window}}"/>
        </windows:WindowDisplay>

        <windows:WindowDisplay DataContext="{Binding EntryListVD}"
                               TopLineEvent="TopLine_MouseDown"
                             ViewWindowEvent="ViewWindow_MouseMove"
                               Visibility="{Binding Source={StaticResource WindowController}, Path=SelectEntryVis}"      
                             Canvas.Left="{Binding Left, Mode=TwoWay}"
                             Canvas.Top="{Binding Top, Mode=TwoWay}"
                               Height="{Binding Height}"
                               Width="{Binding Width}">

            <controls:EntrySelectControl DataContext="{Binding DataContext.ProjectListVM.ProjectVM.EntryListVM, RelativeSource={RelativeSource AncestorType=Window}}"/>
        </windows:WindowDisplay>
        
        <windows:WindowDisplay DataContext="{Binding ProjectListVD}"
                               TopLineEvent="TopLine_MouseDown"
                             ViewWindowEvent="ViewWindow_MouseMove"  
                             Canvas.Left="{Binding Left, Mode=TwoWay}"
                             Canvas.Top="{Binding Top, Mode=TwoWay}">

            <controls:ProjectSelectControl DataContext="{Binding DataContext.ProjectListVM, RelativeSource={RelativeSource AncestorType=Window}}"/>

        </windows:WindowDisplay>



        <windows:WindowDisplay DataContext="{Binding ToolbarListVD}"
                               TopLineEvent="TopLine_MouseDown"
                             ViewWindowEvent="ViewWindow_MouseMove"
                             Canvas.Left="{Binding Left, Mode=TwoWay}"
                             Canvas.Top="{Binding Top, Mode=TwoWay}">
            
            <windows:ToolbarWindow
            DataContext="{Binding DataContext.ProjectListVM, RelativeSource={RelativeSource AncestorType=Window}}"/>
        </windows:WindowDisplay>

        <Button Content="Close" Command="{Binding save}"/>

    </Canvas>
</Window>
