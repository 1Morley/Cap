<Window x:Class="WpfCapstone.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:WpfCapstone.Views"
        xmlns:controlselect="clr-namespace:WpfCapstone.Views.ControlSelector"
        xmlns:viewmodels="clr-namespace:WpfCapstone.ViewModels"
        xmlns:convert="clr-namespace:WpfCapstone.Models.ViewConverter"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"

        AllowsTransparency="True"
        WindowStyle="None"
        Background="#00FF2B95"
        WindowState="Maximized"
        Topmost="True"
        mc:Ignorable="d"
        BorderThickness="{x:Static SystemParameters.WindowResizeBorderThickness}"
        
        Title="MainWindow" Height="450" Width="800">

    <Window.DataContext>
        <viewmodels:MainWindowViewModel/>
    </Window.DataContext>
    
    <Window.Resources>
        <convert:ViewPositionConverter x:Key="PositionConvert"/>

        <DataTemplate x:Key="DefaultProject">
            <views:ProjectDefaultControl 
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>
        </DataTemplate>

        <DataTemplate x:Key="SelectProject">
            <views:ProjectViewControl
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>        
        </DataTemplate>
        
        <DataTemplate x:Key="EmptyProject">
            <views:ProjectEmptyControl
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>        
        </DataTemplate>
        <controlselect:ProjectControlSelector x:Key="ProjectWindowSelector"
                                              DefaultProject="{StaticResource DefaultProject}"
                                              SelectProject="{StaticResource SelectProject}"
                                              EmptyProject="{StaticResource EmptyProject}"/>
        
        <DataTemplate x:Key="CreateProjectFocus">
            <views:FocusCreateProject
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>
        </DataTemplate>
        <DataTemplate x:Key="CreateEntryFocus">
            <views:FocusCreateEntryControl
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>
        </DataTemplate>
       
        <controlselect:FocusControlSelector x:Key="FocusWindowSelector"
                                            CreateProjectFocus="{StaticResource CreateProjectFocus}"
                                            CreateEntryFocus="{StaticResource CreateEntryFocus}"/>


    </Window.Resources>




    <Canvas x:Name="MainCanvas">
        <!--<Viewbox Width="300" Height="500" Stretch="Uniform" VerticalAlignment="Bottom">
            <Rectangle Fill="BlanchedAlmond" Width="50" Height="30"/>
        </Viewbox>
        <Rectangle Fill="BlanchedAlmond" Width="50" Height="30"/>
        -->


        <ContentControl x:Name="ProjectWindow"
                        Content="{Binding ProjectVisibilityVM.ProjectState}"
                        ContentTemplateSelector="{StaticResource ProjectWindowSelector}"
                        >
            <Canvas.Left>
                <MultiBinding Converter="{StaticResource PositionConvert}">
                    <Binding Source="CENTER"/>
                    <Binding ElementName="MainCanvas" Path="ActualWidth"/>
                    <Binding ElementName="ProjectWindow" Path="ActualWidth"/>
                </MultiBinding>
            </Canvas.Left>
        </ContentControl>
        <ContentControl x:Name="FocusWindow" 
                        Content="{Binding ProjectVisibilityVM.FocusState}"
                        ContentTemplateSelector="{StaticResource FocusWindowSelector}"
                        Width="300"
                        Height="250">
            <Canvas.Left>
                <MultiBinding Converter="{StaticResource PositionConvert}">
                    <Binding Source="CENTER"/>
                    <Binding ElementName="MainCanvas" Path="ActualWidth"/>
                    <Binding ElementName="FocusWindow" Path="ActualWidth"/>
                </MultiBinding>
            </Canvas.Left>
            <Canvas.Top>
                <MultiBinding Converter="{StaticResource PositionConvert}">
                    <Binding Source="CENTER"/>
                    <Binding ElementName="MainCanvas" Path="ActualHeight"/>
                    <Binding ElementName="FocusWindow" Path="ActualHeight"/>
                </MultiBinding>
            </Canvas.Top>
        </ContentControl>
        <views:EntryListControl
                DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}"/>
    </Canvas>
</Window>
